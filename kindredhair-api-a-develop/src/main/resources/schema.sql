drop table if exists cart_items CASCADE;
drop table if exists contact_us CASCADE;
drop table if exists disliked_brand CASCADE;
drop table if exists feedback CASCADE;
drop table if exists hair_profile_answer CASCADE;
drop table if exists hair_profile_question CASCADE;
drop table if exists orders CASCADE;
drop table if exists payments CASCADE;
drop table if exists payments_orders CASCADE;
drop table if exists product_recommendation CASCADE;
drop table if exists products CASCADE;
drop table if exists products_feedbacks CASCADE;
drop table if exists shipping_address CASCADE;
drop table if exists user_details CASCADE;
drop table if exists user_favourites CASCADE;
drop table if exists user_hair_profile CASCADE;
drop table if exists users CASCADE;
create table cart_items (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, quantity integer not null, product_id bigint, user_details_id bigint, primary key (id));
create table contact_us (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, email varchar(255), message varchar(255), subject varchar(255), primary key (id));
create table disliked_brand (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, brand_name varchar(255), user_details_id bigint, primary key (id));
create table feedback (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, message varchar(255), subject varchar(255), product_id bigint, user_details_id bigint, primary key (id));
create table hair_profile_answer (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, content varchar(255), hair_profile_question_id bigint, primary key (id));
create table hair_profile_question (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, content varchar(255), title varchar(255), primary key (id));
create table orders (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, quantity integer, status varchar(255), payment_id bigint, product_id bigint, shipping_address_id bigint, primary key (id));
create table payments (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, shipping_cost integer, tax integer, total_amount integer, user_details_id bigint, primary key (id));
create table payments_orders (payment_id bigint not null, orders_id bigint not null, primary key (payment_id, orders_id));
create table product_recommendation (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, category_name varchar(255), recommendation_category varchar(255), product_id bigint, user_details_id bigint, primary key (id));
create table products (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, available boolean not null, brand varchar(255), category varchar(500), description text, imageurl varchar(500), ingredients text, name varchar(255), price integer, producturl varchar(255), search_description varchar(500), search_ingredients varchar(500), size varchar(255), primary key (id));
create table products_feedbacks (product_id bigint not null, feedbacks_id bigint not null, primary key (product_id, feedbacks_id));
create table shipping_address (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, city varchar(255), contact_address varchar(255), contact_number varchar(255), country varchar(255), firstname varchar(255), lastname varchar(255), state varchar(255), zip_code varchar(255), user_details_id bigint, primary key (id));
create table user_details (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, firstname varchar(255), lastname varchar(255), user_id bigint, primary key (id));
create table user_favourites (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, product_id bigint, user_details_id bigint, primary key (id));
create table user_hair_profile (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, answer varchar(255), question varchar(255), user_details_id bigint, primary key (id));
create table users (id bigint generated by default as identity, created_at timestamp, updated_at timestamp, email varchar(255), enabled boolean, last_login timestamp, password varchar(255), phone_number varchar(255), role varchar(255), status varchar(255), primary key (id));
alter table payments_orders add constraint UK_2qrj2crhcc8tcnq5rtc69rnlv unique (orders_id);
alter table products_feedbacks add constraint UK_anqiltu3mqge4ejsen9i398bn unique (feedbacks_id);
alter table cart_items add constraint FK1re40cjegsfvw58xrkdp6bac6 foreign key (product_id) references products;
alter table cart_items add constraint FKt30bjvc38lkj86dc3w965uyc0 foreign key (user_details_id) references user_details;
alter table disliked_brand add constraint FK5mmnhusuuvtoi1wuvcs3iec8j foreign key (user_details_id) references user_details;
alter table feedback add constraint FKc3p4lovbwrtqqkd3ci5t0g84u foreign key (product_id) references products;
alter table feedback add constraint FKr3b4ixhh2qycl5sgp4nm3913o foreign key (user_details_id) references user_details;
alter table hair_profile_answer add constraint FKhm333htu32upa019m5mig8jgc foreign key (hair_profile_question_id) references hair_profile_question;
alter table orders add constraint FK8aol9f99s97mtyhij0tvfj41f foreign key (payment_id) references payments;
alter table orders add constraint FKkp5k52qtiygd8jkag4hayd0qg foreign key (product_id) references products;
alter table orders add constraint FK2dntnxe9677sy06ujhix6o2bp foreign key (shipping_address_id) references shipping_address;
alter table payments add constraint FKhy02n2lq1ajdmrrnjhfgw45t foreign key (user_details_id) references user_details;
alter table payments_orders add constraint FKb0hqimq460kg9lkkgyjsojpyq foreign key (orders_id) references orders;
alter table payments_orders add constraint FKfiss9qe0x9b85m112s1w6fgq4 foreign key (payment_id) references payments;
alter table product_recommendation add constraint FK6cp1w53emyb040l16wfj5w83m foreign key (product_id) references products;
alter table product_recommendation add constraint FKdrqkw6iugntejwl70gwao17k9 foreign key (user_details_id) references user_details;
alter table products_feedbacks add constraint FKk2rbgpihnwl2eycae34ib6ax1 foreign key (feedbacks_id) references feedback;
alter table products_feedbacks add constraint FKg2ebxawm91nnkpfa73o9n1hqv foreign key (product_id) references products;
alter table shipping_address add constraint FKgyeebb5njksvmwvyyr5a79n12 foreign key (user_details_id) references user_details;
alter table user_details add constraint FKicouhgavvmiiohc28mgk0kuj5 foreign key (user_id) references users;
alter table user_favourites add constraint FK5y7aesj2js7c35qygwm6dmsqq foreign key (product_id) references products;
alter table user_favourites add constraint FK90ghthl577d0cyih5whey2xlh foreign key (user_details_id) references user_details;
alter table user_hair_profile add constraint FK8j4j50978ysjpivrq5rrp9u55 foreign key (user_details_id) references user_details;